\chapter{The Theory of Algebraic Number Fields}
  Introductory number theory is done over $\Q$. The associated set of integers $\Z$ is a ring inside $\Q$. Moreover, the fundamental theorem of arithmetic tells us that prime factorization exists in $\Z$. That is, every integer is uniquely a product of primes (up to reordering of the factors). The purpose of algebraic number theory is to consider algebraic number fields which are finite extensions of $\Q$ where there might no longer be prime factorization. In the following, we discuss the structure of algebraic number fields, their associated ring of integers, and the properties of prime factorization.
  \section{Algebraic Numbers Fields \& Algebraic Integers}
    An \textbf{algebraic number field}\index{algebraic number field} $K$ is a finite extension of $\Q$. That is, $K$ is a finite dimensional vector space over $\Q$. We say that the \textbf{degree}\index{degree} of $K$ is $[K:\Q]$ which is the dimension of this vector space. Any $\k \in K$ is called an \textbf{algebraic number}\index{algebraic number}. Moreover, we say that $\k$ is an \textbf{algebraic integer}\index{algebraic integer} if it is the root of a monic polynomial $f(x) \in \Z[x]$. If $K = \Q$, it is clear that any integer is an algebraic integer ($n$ is the root of $x-n$.). Moreover, any rational root of a monic polynomial must be an integer by the rational root theorem. In other words, if $f(x) \in \Z[x]$ is monic and $q \in \Q$ is a root of $f(x)$ then $q \in \Z$. Therefore for the algebraic number field $\Q$, the algebraic integers are exactly the integers $\Z$. Our first goal in studying algebraic number fields is to discuss the algebraic integers. Accordingly, we define the \textbf{ring of integers}\index{ring of integers} $\mc{O}_{K}$ of $K$ by
    \[
      \mc{O}_{K} = \{\k \in K:\text{$\k$ is an algebraic integer}\}.
    \]
    From what we have just shown above, $\Z \subseteq \mc{O}_{K}$. For a general algebraic number field $K$, $\mc{O}_{K}$ can be strictly larger than $\Z$. The ring of integers $\mc{O}_{K}$ is the analog of $\Z$ in $\Q$ but for $K$. Our primarily goals will be to show that $\mc{O}_{K}$ is a ring and more precisely a free abelian group of rank equal to the degree of $K$. The following proposition shows that $\mc{O}_{K}$ is indeed a ring:

    \begin{proposition}\label{prop:algebraic_integer_if_finitely_generated}
      Let $K$ be an algebraic number field. Then the finitely many elements $\k_{1},\ldots,\k_{n} \in B$ are all algebraic integers if and only if $\Z[\k_{1},\ldots,\k_{n}]$ is a finitely generated $\Z$-module. In particular, $\mc{O}_{K}$ is a ring.
    \end{proposition}
    \begin{proof}
      First suppose $\k \in K$ is an algebraic integer. Then there exists a monic polynomial $f(x) \in \Z[x]$, of say degree $n \ge 1$, such that $f(\k) = 0$. Now for any $g(x) \in \Z[x]$, Euclidean division implies
      \[
        g(x) = q(x)f(x)+r(x),
      \]
      with $q(x),r(x) \in \Z[x]$ and $\deg(r(x)) < n$. Letting $r(x) = a_{n-1}x^{n-1}+\cdots+a_{1}x+a_{0}$ with $a_{i} \in \Z$ for $0 \le i \le n-1$, it follows that
      \[
        g(\k) = r(\k) = a_{n-1}\k^{n-1}+\cdots+a_{1}\k+a_{0}.
      \]
      As $g(x)$ was arbitrary, we see that $\{1,\k,\ldots,\k^{n-1}\}$ is a generating set for $\Z[\k]$ as a $\Z$-module. Now suppose $\k_{1},\ldots,\k_{n} \in K$ are all algebraic integers. We will prove that $\Z[\k_{1},\ldots,\k_{n}]$ is finitely generated as an $\Z$-module by induction. Our previous work implies the base case. So assume by induction that $R = \Z[\k_{1},\ldots,\k_{n-1}]$ is a finitely generated $\Z$-module. Then $R[\k_{n}] = A[\k_{1},\ldots,\k_{n}]$ is a finitely generated $R$-module and hence a finitely generated $\Z$-module as well by our induction hypothesis. Now suppose $A[\k_{1},\ldots,\k_{n}]$ is a finitely generated $\Z$-module. Let $\{\w_{1},\ldots,\w_{r}\}$ be a set of generators. Then for any $\k \in A[\k_{1},\ldots,\k_{n}]$, we have
      \[
        \k\w_{i} = \sum_{1 \le j \le r}a_{i,j}\w_{j},
      \]
      with $a_{i,j} \in \Z$ for $1 \le i,j \le r$.We can rewrite this as,
      \[
        (\k-a_{i,i})\w_{i}-\sum_{\substack{1 \le j \le r \\ j \neq i}}a_{i,j}\w_{j} = 0,
      \]
      for all $i$. These $r$ equations are equivalent to the identity
      \[
        \begin{pmatrix} k-a_{1,1} & a_{1,2} & \cdots & -a_{1,r} \\ -a_{2,1} & \k-a_{2,2} & & \\ \vdots & & \ddots & \\ -a_{r,1} & & & \k-a_{r,r} \end{pmatrix}\begin{pmatrix} \w_{1} \\ \w_{2} \\ \vdots \\ \w_{r} \end{pmatrix} = \mathbf{0}.
      \]
      Thus the determinant of the matrix on the left-hand side must be zero. This shows that $\k$ is the root of the characteristic polynomial $\det(xI-(a_{i,j}))$ which is a monic polynomial with coefficients in $\Z$. Hence $\k$ is an algebraic integer. As $\k$ was arbitrary, this shows that the elements $\k_{1},\ldots,\k_{n}$ are all algebraic integers and that the sum and product of algebraic integers are algebraic integers. It follows that $\mc{O}_{K}$ is a ring.
    \end{proof}

    We can also show that $K$ is the field of fractions of $\mc{O}_{K}$. Actually, the following proposition proves this and more:

    \begin{proposition}\label{prop:field_of_fractions_of_ring_of_integers}
      Let $K$ be an algebraic number field. Then every $\k \in K$ is of the form
      \[
        \k = \frac{\a}{a},
      \]
      for some $\a \in \mc{O}_{K}$ and nonzero $a \in \Z$. In particular, $K$ is the field of fractions of $\mc{O}_{K}$. Moreover, $\k \in K$ is an algebraic integer if and only if the minimal polynomial of $\k$ has coefficients in $\Z$.
    \end{proposition}
    \begin{proof}
      As $K/\Q$ is finite, it is necessarily algebraic so that any $\k \in K$ satisfies
      \[
        a\k^{n}+a_{n-1}\k^{n-1}+\cdots+a_{0} = 0,
      \]
      with $a_{i} \in \Z$ for $0 \le i \le n-1$ and $a \neq 0$. We claim that $a\k$ is an algebraic integer. Indeed, multiplying the previous identity by $a^{n-1}$ yields
      \[
        (a\k)^{n}+a_{n-1}'(a\k)^{n-1}+\cdots+a_{0}' = 0,
      \]
      where $a_{i}' = a_{i}a^{n-1-i}$ for $0 \le i \le n-1$, and so $a\k$ is the root of a monic polynomial with coefficients in $\Z$. Then $a\k \in \mc{O}_{K}$ and so $a\k = \a$ for some $\a \in \mc{O}_{K}$ which is equivalent to $\k = \frac{\a}{a}$. As $\Z \subseteq \mc{O}_{K}$, this also implies that $K$ is the field of fractions of $\mc{O}_{K}$. For the last statement, suppose $\k \in K$. If the minimal polynomial of $\k$ has integer coefficients then $\k$ is automatically an algebraic integer (since the minimal polynomial is monic). So suppose $\k$ is an algebraic integer so that $\k$ is a root of a monic polynomial $f(x) \in \Z[x]$. If $p_{\k}(x) \in \Q[x]$ is the minimal polynomial of $\k$, then $p_{\k}(x)$ divides $f(x)$ and thus all of the roots of $p_{\k}(x)$ algebraic integers too. By Vieta's formulas, the coefficients of $p_{\k}(x)$ algebraic integers as well. But then $p_{\k}(x) \in \Z[x]$. This completes the proof.
    \end{proof}

    We will now require norms and traces of extensions of algebraic number fields. Let $L/K$ be a degree $n$ extension of algebraic number fields. In particular, $L$ is an $n$-dimensional vector space over $K$. The \textbf{trace}\index{trace} and \textbf{norm}\index{norm} of $L/K$, denoted $\Trace_{L/K}$ and $\Norm_{L/K}$ respectively, are defined by
    \[
      \Trace_{L/K}(\l) = \tr(T_{\l}) \quad \text{and} \quad \Norm_{L/K}(\l) = \det(T_{\l}),
    \]
    for any $\l \in L$, where $T_{\l}:L \to L$ is the linear operator defined by
    \[
      T_{\l}(x) = \l x,
    \]
    for all $x \in L$. That is, $T_{\l}$ is the multiplication by $\l$ map. In the case of the extension $K/\Q$, we write $\Trace = \Trace_{K/\Q}$ and $\Norm = \Norm_{K/\Q}$. Moreover, for any $\k \in K$ we call $\Trace(\k)$ and $\Norm(\k)$ the \textbf{trace}\index{trace} and \textbf{norm}\index{norm} of $\k$ respectively. Letting $f_{\l}(t)$ denote the characteristic polynomial of $T_{\l}$, we have
    \[
      f_{\l}(t) = \det(tI-T_{\l}) = t^{n}-\k_{n-1}t^{n-1}+\cdots+(-1)^{n}\k_{0},
    \]
    with $\k_{i} \in K$ for $0 \le i \le n-1$. Then the trace and the norm are given by
    \begin{equation}\label{equ:trace_and_norm_characteristic_polynomial}
      \Trace_{L/K}(\l) = \k_{n-1} \quad \text{and} \quad \Norm_{L/K}(\l) = \k_{0},
    \end{equation}
    and therefore take values in $K$. Moreover, we have
    \[
      \Trace_{L/K}(\k\l) = \k\Trace_{L/K}(\l) \quad \text{and} \quad \Norm_{L/K}(\k\l) = \k^{n}\Norm_{L/K}(\l),
    \]
    for all $\k \in K$ because $T_{\k\l} = \k T_{\l}$. In particular, $T_{1} = I$ implies
    \[
      \Trace_{L/K}(1) = n \quad \text{and} \quad \Norm_{L/K}(1) = 1.
    \]
    We also see that $\Norm_{L/K}(\l) = 0$ if and only if $\l = 0$ (if $\l \neq 0$ then $\l$ is invertible and hence $T_{\l}$ is too and so has nonzero determinant). As $T_{\l+\nu} = T_{\l}+T_{\nu}$ and $T_{\l \nu} = T_{\l}T_{\nu}$, we obtain homomorphisms 
    \[
      \Trace_{L/K}:L \to K \quad \text{and} \quad \Norm_{L/K}:L^{\ast} \to K^{\ast}.
    \]
    We will now derive alternative descriptions of the trace and norm. To do this, we need to work in the algebraic closure $\conj{K}$ of $K$. As $L/K$ is degree $n$ and $K$ is a finite extension of $\Q$, there are exactly $n$ distinct $K$-embeddings of $L$ into $\conj{K}$ (each given by letting $\t$ be a primitive element for $L$ so that $L = K[\t]$ and sending $\t$ to one of its conjugate roots in the minimal polynomial $p_{\t}(x)$ of $\t$). We can now prove the following proposition:

    \begin{proposition}\label{prop:formulas_for_trace_and_norm}
      Let $L/K$ be a degree $n$ extension of algebraic number fields and let $\s_{1},\ldots,\s_{n}$ denote the $K$-embeddings of $L$ in $\conj{K}$. For any $\l \in L$, the characteristic polynomial $f_{\l}(t)$ of $T_{\l}$ is a power of the minimal polynomial of $\l$ and satisfies
      \[
        f_{\l}(t) = \prod_{1 \le i \le n}(t-\s_{i}(\l)).
      \]
      In particular,
      \[
        \Trace_{L/K}(\l) = \sum_{1 \le i \le n}\s_{i}(\l) \quad \text{and} \quad \Norm_{L/K}(\l) = \prod_{1 \le i \le n}\s_{i}(\l).
      \]
    \end{proposition}
    \begin{proof}
      Let
      \[
        p_{\l}(t) = t^{m}+\k_{m-1}t^{m-1}+\cdots+\k_{0},
      \]
      with $\k_{i} \in K$ for $0 \le i \le n-1$, be the minimal polynomial of $\l$ (necessarily $m$ is the degree of $K(\l)/K$). Let $d$ be the degree of $L/K(\l)$. We first show that $f_{\l}(t)$ is a power of $p_{\l}(t)$. Precisely, we claim that
      \[
        f_{\l}(t) = p_{\l}(t)^{d}.
      \]
      To see this, recall that $\{1,\l,\ldots,\l^{n-1}\}$ is a basis for $K(\l)/K$. If $\{\a_{1},\ldots,\a_{d}\}$ is a basis for $L/K(\l)$, then
      \[
        \{\a_{1},\a_{1}\l,\ldots,\a_{1}\l^{m-1},\ldots,\a_{d},\a_{d}\l,\ldots,\a_{d}\l^{m-1}\},
      \]
      is a basis for $L/K$. Because the minimal polynomial $p_{\l}(t)$ gives the linear relation
      \[
        \l^{m} = -\k_{0}-k_{1}\l-\cdots-\k_{m-1}\l^{m-1},
      \]
      the matrix of $T_{\l}$ is block diagonal with $d$ blocks each of the form
      \[
        \begin{pmatrix} & 1 & & & \\ & & 1 & & \\ & & & \ddots & \\ & & & & 1 \\ -\k_{0} & -\k_{1} & -\k_{2} & \cdots & -\k_{m-1} \\ \end{pmatrix}.
      \]
      This is the companion matrix to $p_{\l}(t)$ and hence the characteristic polynomial is $p_{\l}(t)$ as well. Our claim follows since the matrix of $T_{\l}$ is block diagonal. Since $\l$ is algebraic over $K$ of degree $m$, $K(\l)$ is the splitting field of $p_{\l}(t)$ and there are $m$ distinct $K$-embeddings of $K(\l)$ into $\conj{L}$. Denote these $m$ embeddings by $\tau_{1},\ldots,\tau_{m}$. Then the embeddings $\s_{1},\ldots,\s_{n}$ are partitioned into $m$ many equivalence classes each of size $d$ (because $L/K(\l)$ is degree $d$) where $\s_{i}$ and $\s_{j}$ are in the same class if and only if $\s_{i}(\l) = \s_{j}(\l)$. In particular, a complete set of representatives is $\{\tau_{1},\ldots,\tau_{m}\}$. But then
      \[
        f_{\l}(t) = p_{\l}(t)^{d} = \left(\prod_{1 \le i \le m}(t-\tau_{i}(\l))\right)^{d} = \prod_{1 \le i \le n}(t-\s_{i}(\l)).
      \]
      This proves the first statement. The formulas for the trace and norm follow from Vieta's formulas and \cref{equ:trace_and_norm_characteristic_polynomial}.
    \end{proof}

    As a corollary, we can show how the trace and norm act on algebraic integers for the extension $K/\Q$:

    \begin{corollary}\label{cor:norm_and_trace_of_algebraic_integers}
      Let $K$ be an algebraic number field. If $\k \in K$ is an algebraic integer, then the trace and norm of $\k$ are integers.
    \end{corollary}
    \begin{proof}
      By \cref{prop:field_of_fractions_of_ring_of_integers}, if $\k$ is an algebraic integer then its minimal polynomial $p_{\k}(t)$ has integer coefficients. By \cref{prop:formulas_for_trace_and_norm} the characteristic polynomial $f_{\k}(t)$ is a power of $p_{\k}(t)$. Hence $f_{\k}(t)$ has integer coefficients. From \cref{equ:trace_and_norm_characteristic_polynomial} we conclude that the trace and norm of $\k$ are integers.
    \end{proof}

    We can also classify the units in $\mc{O}_{K}$ according to their norm:

    \begin{corollary}
      Let $K$ be an algebraic number field. Then $\a \in \mc{O}_{K}$ is a unit if and only if its norm is $\pm 1$.
    \end{corollary}
    \begin{proof}
      Let $\a \in \mc{O}_{K}$. First suppose $\a$ is a unit in $\mc{O}_{K}$. Then $\frac{1}{\a} \in \mc{O}_{K}$ and so
      \[
        \Norm(\a)\Norm\left(\frac{1}{\a}\right) = \Norm(1) = 1.
      \]
      By \cref{cor:norm_and_trace_of_algebraic_integers}, the norm of $\a$ and $\frac{1}{\a}$ are both integers. Hence they must be $\pm1$ and thus the norm of $\a$ is $\pm1$. Now suppose the norm of $\a$ is $\pm1$. By \cref{prop:field_of_fractions_of_ring_of_integers}, its minimal polynomial $p_{\a}(t)$ has integer coefficients. Moreover, \cref{equ:trace_and_norm_characteristic_polynomial,prop:formulas_for_trace_and_norm} together imply that the constant term is $\pm1$. Letting the degree of $p_{\a}(t)$ be $m$, we have shown that
      \[
        p_{\a}(t) = t^{m}+a_{m-1}t^{m-1}+\cdots\pm1,
      \]
      with $a_{i} \in \Z$ for $1 \le i \le m-1$. Dividing $p_{\a}(\a)$ by $\a^{m}$, we find that $\frac{1}{\a}$ is a root of the polynomial
      \[
        f(x) = \pm t^{m}+a_{1}t^{m-1}+\cdots+1.
      \]
      Multiplying by $-1$ if necessary, it follows that $\frac{1}{\a}$ is a root of a monic polynomial with coefficients in $\Z$. Hence $\frac{1}{\a} \in \mc{O}_{K}$ and thus $\a$ is a unit in $\mc{O}_{K}$.
    \end{proof}

    We can now prove a structure theorem for the ring of integers $\mc{O}_{K}$ of an algebraic number field $K$. We show that the ring of integers is a free abelian group with rank equal to the degree of $K$ which clearly is a generalization of the structure of $\Z$ for for the algebraic number field $\Q$:

    \begin{theorem}\label{thm:ring_of_integers_finitely_generated}
      Let $K$ be an algebraic number field of degree $n$. Then $\mc{O}_{K}$ is a free abelian group of rank $n$. In particular, $\mc{O}_{K}$ is a finitely generated $\Z$-module.
    \end{theorem}
    \begin{proof}
      Let $\{\k_{1},\ldots,\k_{n}\}$ be a basis for $K$. By \cref{prop:field_of_fractions_of_ring_of_integers}, we have $\k_{i} = \frac{\a_{i}}{a_{i}}$ with $\a_{i} \in \mc{O}_{K}$ and $a_{i} \in \Z$ for $1 \le i \le n$. Hence $\{\a_{1},\ldots,\a_{n}\}$ is a basis for $K$ as well. In particular, any element $\a \in \mc{O}_{K}$ can be expressed as
      \[
        \a = \sum_{1 \le i \le n}q_{i}(\a)\a_{i},
      \]
      with $q_{i}(\a) \in \Q$. We now show that the denominators of the $q_{i}(\a)$ are uniformly bounded for all $1 \le i \le n$ and all $\a$. Assume this is not the case. Then there is a sequence $(\b_{j})_{j \ge 1}$ of nonzero elements in $\mc{O}_{K}$ where
      \[
        \b_{j} = \sum_{1 \le i \le n}q_{i}(\b_{j})\a_{i},
      \]
      is such that the greatest denominator of $q_{i}(\b_{j})$ for $1 \le i \le n$ tends to infinity as $j \to \infty$. In terms of the basis $\{\a_{1},\ldots,\a_{n}\}$, $\Norm(\b_{j})$ is the determinant of an $n \x n$ matrix with coefficients in $\Q[q_{i}(\b_{j})]_{1 \le i \le n}$. In particular, it is a homogenous polynomial of degree $n$ in the $q_{i}(\b_{j})$ for $1 \le i \le n$ with coefficients in $\Q$ determined by the basis $\{\a_{1},\ldots,\a_{n}\}$. But $\Norm(\b_{j})$ is an integer by \cref{cor:norm_and_trace_of_algebraic_integers}. It is also nonzero because $\b_{j}$ is nonzero. Hence $|\Norm(\b_{j})| \ge 1$ and thus, by what we have just shown, the greatest denominator of $q_{i}(\b_{j})$ for $1 \le i \le n$ must be bounded as $j \to \infty$. This gives a contradiction. Hence there is an integer $M \ge 1$ such that $Mq_{i}(\a) \in \Z$ for all $1 \le i \le n$ and $\a \in \mc{O}_{K}$. Therefore
      \[
        \mc{O}_{K} \subseteq \frac{1}{M}\bigop_{1 \le i \le n}\Z\a_{i}.
      \]
      As the group on the right-hand side is a free abelian group so is $\mc{O}_{K}$. Moreover, as $\{\a_{1},\ldots,\a_{n}\}$ is a basis for $K$ we see that $\{\a_{1},\ldots,\a_{n}\}$ is linearly independent over $\Z$ as well. This means that the rank of $\mc{O}_{K}$ must be $n$. The last statement is now clear.
    \end{proof}

    In accordance with \cref{thm:ring_of_integers_finitely_generated}, we say that $\{\a_{1},\ldots,\a_{n}\}$ is an \textbf{integral basis}\index{integral basis} for $K$ if $\{\a_{1},\ldots,\a_{n}\}$ is a basis for $K$ and $\mc{O}_{K}$ can be expressed as
    \[
      \mc{O}_{K} = \Z\a_{1}+\cdots+\Z\a_{n}.
    \]
    That is, every $\a \in \mc{O}_{K}$ is a unique integer linear combination of the $\a_{i}$. An integral basis for $K$ always exists by \cref{thm:ring_of_integers_finitely_generated}. Lastly, we can show that algebraic integers satisfy a slightly weaker condition:

    \begin{proposition}\label{ring_of_integers_algebraically_closed}
      Let $K$ be an algebraic number field. Then $\k \in K$ is an algebraic integer if and only if $\k$ is the root of a monic polynomial with coefficients in $\mc{O}_{K}$.
    \end{proposition}
    \begin{proof}
      If $\k \in K$ is an algebraic integer, then $\k$ is the root of a monic polynomial with coefficients in $\Z$ and hence in $\mc{O}_{K}$ as well. So suppose $\k \in K$ is the root of a monic polynomial $f(x) \in \mc{O}_{K}$. Let $f(x)$ have degree $n$ and write
      \[
        f(x) = x^{n}+\a_{n-1}x^{n-1}+\cdots+\a_{0},
      \]
      with $\a_{i} \in \mc{O}_{K}$ for $0 \le i \le n-1$. As $f(\k) = 0$, we have
      \[
        \k^{n} = -\a_{n-1}\k^{n-1}-\cdots-\a_{0},
      \]
      and hence $\mc{O}_{K}[\k]$ is a finitely generated $\Z$-module because $\mc{O}_{K}$ is by \cref{thm:ring_of_integers_finitely_generated}. As $\Z[\k] \subseteq \mc{O}_{K}[\k]$, $\Z[\k]$ is also a finitely generated $\Z$-module. Hence $\k$ is an algebraic integer by \cref{prop:algebraic_integer_if_finitely_generated}.
    \end{proof}
  \section{Integral \& Fractional Ideals}
    For the algebraic number field $\Q$, its ring of integers $\Z$ is a unique factorization domain. Indeed, this is just a restatement of the fundamental theorem of arithmetic. Unfortunately, for a general algebraic number field $K$ its ring of integers $\mc{O}_{K}$ need not be a unique factorization domain. However, the ideals of $\mc{O}_{K}$ do factor into a unique product of prime ideals (this is trivial for a unique factorization domain). Our main goal is to prove this. We first introduce some notation. Any nonzero ideal $\mf{a}$ of $\mc{O}_{K}$ is said to be an \textbf{integral ideal}\index{integral ideal} of $K$. We first show that the quotient ring by an integral ideal is always finite:

    \begin{proposition}\label{prop:residue_of_integral_ideal_is_finite}
      Let $K$ be an algebraic number field. For any $\a \in \mc{O}_{K}$, $\mc{O}_{K}/\a\mc{O}_{K}$ is finite and
      \[
        |\mc{O}_{K}/\a\mc{O}_{K}| = |\Norm(\a)|.
      \]
      Moreover, $\mc{O}_{K}/\mf{a}$ is finite for any integral ideal $\mf{a}$.
    \end{proposition}
    \begin{proof}
      Let the degree of $K$ be $n$ and $\{\a_{1},\ldots,\a_{n}\}$ be an integral basis for $K$. Then $\{\a\a_{1},\ldots,\a\a_{n}\}$ is linearly independent and hence $\a\mc{O}_{K}$ is a rank $n$ free abelian group. Letting
      \[
        \a = \sum_{1 \le i \le n}a_{i}\a_{i},
      \]
      with $a_{i} \in \Z$, it follows that
      \[
        \mc{O}_{K}/\a\mc{O}_{K} \cong \Z/a_{1}\Z \op \cdots \op \Z/a_{n}\Z.
      \]
      Therefore $|\mc{O}_{K}/\a\mc{O}_{K}| = |a_{1} \cdots a_{n}|$ and thus is finite. Now in terms of the integral basis $\{\a_{1},\ldots,\a_{n}\}$, we have
      \[
        T_{\a} = \begin{pmatrix} a_{1} & & \\ & \ddots & \\ & & a_{n} \end{pmatrix},
      \]
      and so $\Norm(\a) = a_{1} \cdots a_{n}$. But then
      \[
        \Norm(\a\mc{O}_{K}) = |\Norm(\a)|,
      \]
      as desired. Now let $\mf{a}$ be an integral ideal. Since $\mf{a}$ is nonzero, there is some nonzero $\a \in \mf{a}$. But then $\a\mc{O}_{K} \subseteq \mf{a}$ and reduction modulo $\mf{a}$ induces a surjection $\mc{O}_{K}/\a\mc{O}_{K} \to \mc{O}_{K}/\mf{a}$. Thus $\mc{O}_{K}/\mf{a}$ is finite because $\mc{O}_{K}/\a\mc{O}_{K}$ is.
    \end{proof}

    For an integral ideal $\mf{a}$, we define its \textbf{norm}\index{norm} $\Norm(\mf{a})$ by
    \[
      \Norm(\mf{a}) = |\mc{O}_{K}/\mf{a}|.
    \]
    By \cref{prop:residue_of_integral_ideal_is_finite}, the norm is finite, necessarily a positive integer, and for every $\a \in \mc{O}_{K}$ we have
    \[
      \Norm(\a\mc{O}_{K}) = |\Norm(\a)|.
    \]
    We can now show that every prime integral ideal is maximal:

    \begin{proposition}\label{prop:prime_integral_ideals_are_maximal}
      Let $K$ be an algebraic number field. Every prime integral ideal $\mf{p}$ in $\mc{O}_{K}$ is maximal.
    \end{proposition}
    \begin{proof}
      Recall that an ideal is maximal if and only if the quotient ring is a field. Therefore it suffices to show that $\mc{O}_{K}/\mf{p}$ is a field. Let $\a \in \mc{O}_{K}/\mf{p}$ be nonzero. We will show that $\a$ is invertible in $\mc{O}_{K}/\mf{p}$. Since $\mf{p}$ is maximal, $\mc{O}_{K}/\mf{p}$ is an integral domain. Therefore the multiplication map
      \[
        \mc{O}_{K}/\mf{p} \to \mc{O}_{K}/\mf{p} \qquad x \mapsto \a x,
      \]
      is injective. By \cref{prop:residue_of_integral_ideal_is_finite}, $\mc{O}_{K}/\mf{p}$ is finite and therefore this map must be a bijection. But this means that $\a$ has an inverse in $\mc{O}_{K}/\mf{p}$. Hence $\mc{O}_{K}/\mf{p}$ is a field.
    \end{proof}

    As prime integral ideals are maximal by \cref{prop:prime_integral_ideals_are_maximal} and distinct maximal ideals are relatively prime, we see that distinct prime integral ideals $\mf{p}$ and $\mf{q}$ are relatively prime. In particular, their powers are relatively prime as well (which follows by induction). We will now being working to show that every integral ideal factors uniquely into a product of prime integral ideals. First we show containment in one direction:

    \begin{lemma}\label{lem:integral_ideal_prime_containment}
      Let $K$ be an algebraic number field. For every integral ideal $\mf{a}$, there exist prime integral ideals $\mf{p}_{1},\ldots,\mf{p}_{k}$ such that
      \[
        \mf{p}_{1}\cdots\mf{p}_{k} \subseteq \mf{a}.
      \]
    \end{lemma}
    \begin{proof}
      Let $\mc{S}$ be the set of integral ideals which do not contain a product of prime integral. Then it suffices to show $\mc{S}$ is empty. Assume otherwise so that there is an integral ideal $\mf{a} \in \mc{S}$. Then $\mf{a}$ cannot be prime for otherwise $\mf{a}$ contains a product of prime integral ideals (namely itself). Since $\mf{a}$ is not prime, there exist $\a_{1},\a_{2} \in \mc{O}_{K}$ with $\a_{1}\a_{2} \in \mf{a}$ and such that $\a_{1},\a_{2} \notin \mf{a}$. Now define integral ideals
      \[
        \mf{b}_{1} = \mf{a}+\a_{1}\mc{O}_{K} \quad \text{and} \quad \mf{b}_{2} = \mf{a}+\a_{2}\mc{O}_{K}.
      \]
      Note that $\mf{b}_{1}$ and $\mf{b}_{2}$ strictly contain $\mf{a}$ because $\a_{1},\a_{2} \notin \mf{a}$. Moreover, $\mf{b}_{1}\mf{b}_{2} \subseteq \mf{a}$ because
      \[
        \mf{b}_{1}\mf{b}_{2} = (\mf{a}+\a_{1}\mc{O}_{K})(\mf{a}+\a_{2}\mc{O}_{K}) = \mf{a}^{2}+\a_{1}\mc{O}_{K}+\a_{2}\mc{O}_{K}+\a_{1}\a_{2}\mc{O}_{K},
      \]
      and $\a_{1}\a_{2} \in \mf{a}$. We now show that either $\mf{b}_{1}$ or $\mf{b}_{2}$ belongs to $\mc{S}$. Suppose otherwise. Then there exist prime integral ideals $\mf{p}_{1},\ldots,\mf{p}_{k}$ and $\mf{q}_{1},\ldots,\mf{q}_{\ell}$ such that
      \[
        \mf{p}_{1}\cdots\mf{p}_{k} \subseteq \mf{b}_{1} \quad \text{and} \quad \mf{q}_{1}\cdots\mf{q}_{\ell} \subseteq \mf{b}_{2}.
      \]
      But then
      \[
        \mf{p}_{1}\cdots\mf{p}_{k}\mf{q}_{1}\cdots\mf{q}_{\ell} \subseteq \b_{1}\b_{2} \subseteq \mf{a},
      \]
      which contradicts the fact that $\mf{a}$ is in $\mc{S}$. Hence $\mf{b}_{1}$ or $\mf{b}_{2}$ belongs to $\mc{S}$. In total, we have shown that if $\mf{a} \in \mc{S}$, then there exists an integral ideal $\mf{a}_{1} \in \mc{S}$ strictly larger than $\mf{a}$. Thus we obtain a strictly increasing infinite sequence of integral ideals in $\mc{S}$:
      \[
        \mf{a} \subset \mf{a}_{1} \subset \mf{a}_{2} \subset \cdots.
      \]
      Taking the norm, we obtain a strictly decreasing sequence of positive integers:
      \[
        \Norm(\mf{a}) > \Norm(\mf{a}_{1}) > \Norm(\mf{a}_{2}) > \cdots.
      \]
      This is impossible since the norm of an integral ideal is a positive integer. Hence $\mc{S}$ is empty and the claim follows.
    \end{proof}

    In order to obtain the reverse containment in \cref{lem:integral_ideal_prime_containment}, we need to do more work. Precisely, we want to show that every integral ideal factors into a product of prime integral ideals. To accomplish this, we will construct a group containing the ideals. Unfortunately, ideals are not invertible and so we need to work in a slightly more general setting. First observe that an integral ideal $\mf{a}$ is just an $\mc{O}_{K}$-submodule of $\mc{O}_{K}$. Moreover, it is a finitely generated $\mc{O}_{K}$-submodule of $K$ by \cref{thm:ring_of_integers_finitely_generated}. We say $\mf{f}$ is a \textbf{fractional ideal}\index{fractional ideal} of $K$ if $\mf{f}$ a nonzero finitely generated $\mc{O}_{K}$-submodule of $K$. In particular, all integral ideals are fractional ideals. Now let $\k_{1},\ldots,\k_{r} \in K$ be generators for the fractional ideal $\mf{f}$. Since $K$ is the field of fractions of $\mc{O}_{K}$ by \cref{prop:field_of_fractions_of_ring_of_integers}, $\k_{i} = \frac{\b_{i}}{\a_{i}}$ with $\a_{i},\b_{i} \in \mc{O}_{K}$ and where $\a_{i}$ is nonzero for $1 \le i \le r$. Setting $\a = \a_{1} \cdots \a_{r}$, we have that $\a\k_{i} \in \mc{O}_{K}$ for all $i$ and hence $\a\mf{f}$ is an integral ideal. Conversely, if there exists some nonzero $\a \in \mc{O}_{K}$ such that $\a\mf{f}$ is an integral ideal then $\mf{f}$ is a fractional ideal because $\mf{a}$ is a finitely generated $\mc{O}_{K}$-submodule of $K$ and hence $\mf{f}$ is too. Thus for any fractional ideal $\mf{f}$, there exists an integral ideal $\mf{a}$ and nonzero $\a \in \mc{O}_{K}$ such that
    \[
      \mf{f} = \frac{1}{\a}\mf{a}.
    \]
    Every fractional ideal is of this form and integral ideals are precisely those for which $a = 1$. Now let $\mf{p}$ be a prime integral ideal. We define $\mf{p}^{-1}$ by
    \[
      \mf{p}^{-1} = \{\k \in K:\k\mf{p} \subseteq \mc{O}_{K}\}.
    \]
    It turns out that $\mf{p}^{-1}$ is a fractional ideal. Indeed, since $\mf{p}$ is an integral ideal there exists a nonzero $\a \in \mf{p}$. By definition of $\mf{p}^{-1}$, we have that $\a\mf{p}^{-1} \subseteq \mc{O}_{K}$. Hence $\a\mf{p}^{-1}$ is an integral ideal and therefore $\mf{p}^{-1}$ is a fractional ideal. Unlike integral ideals, $1 \in \mf{p}^{-1}$ so that $\mf{p}^{-1}$ contains units. The following proposition proves a stronger version of this and more:

    \begin{lemma}\label{lem:inverse_for_prime_ideals}
      Let $K$ be an algebraic number field and $\mf{p}$ be a prime integral ideal. Then the following hold:
      \begin{enumerate}[label=(\roman*)]
        \item
        \[
          \mc{O}_{K} \subset \mf{p}^{-1}.
        \]
        \item
        \[
          \mf{p}^{-1}\mf{p} = \mc{O}_{K}.
        \]
      \end{enumerate}
    \end{lemma}
    \begin{proof}
      We will prove the latter two statement separately:
      \begin{enumerate}[label=(\roman*)]
        \item Clearly $\mc{O}_{K} \subseteq \mf{p}^{-1}$ so it suffices to show that $\mf{p}^{-1}$ contains a nonzero element which is not an algebraic integer. Again, let $\a \in \mf{p}$ be nonzero. By \cref{lem:integral_ideal_prime_containment} let $k \ge 1$ be the minimal integer such that there exist prime integral ideals $\mf{p}_{1},\ldots,\mf{p}_{k}$ with
        \[
          \mf{p}_{1} \cdots \mf{p}_{k} \subseteq \a\mc{O}_{K}.
        \]
        As $\a \in \mf{p}$, we have $\a\mc{O}_{K} \subseteq \mf{p}$. Since $\mf{p}$ is prime, there must be some $i$ with $1 \le i \le k$ such that $\mf{p}_{i} \subseteq \mf{p}$. Without loss of generality, we may assume $\mf{p}_{1} \subseteq \mf{p}$. But by \cref{prop:prime_integral_ideals_are_maximal} prime integral ideals are maximal and thus $\mf{p}_{1} = \mf{p}$. Moreover, since $k$ is minimal we must have
        \[
          \mf{p}_{2} \cdots \mf{p}_{k} \not\subseteq \a\mc{O}_{K}.
        \]
        Hence there exists a nonzero $\b \in \mf{p}_{2} \cdots \mf{p}_{k}$ with $\b \notin \a\mc{O}_{K}$. We will now show that $\b\a^{-1}$ is a nonzero element in $\mf{p}^{-1}$ that is not an algebraic integer. Clearly $\b\a^{-1}$ is nonzero. Since $\mf{p}_{1} = \mf{p}$, what we have previously shown implies $\b\mf{p} \subseteq \a\mc{O}_{K}$ and hence $\b\a^{-1}\mf{p} \in \mc{O}_{K}$ which means $\b\a^{-1} \in \mf{p}^{-1}$. But as $\b \notin \a\mc{O}_{K}$, we also have $\b\a^{-1} \notin \mc{O}_{K}$ so that $\b\a^{-1}$ is not an algebraic integer. This completes the proof of (i).
        \item By (i) and the definition of $\mf{p}^{-1}$, we have $\mf{p} \subseteq \mf{p}^{-1}\mf{p} \subseteq \mc{O}$. Since $\mf{p}$ is maximal by \cref{prop:prime_integral_ideals_are_maximal}, it follows that $\mf{p}^{-1}\mf{p}$ is either $\mf{p}$ or $\mc{O}_{K}$. So it suffices to show that the first case cannot hold. Assume by contradiction that $\mf{p}^{-1}\mf{p} = \mf{p}$. Let $\{\w_{1},\ldots,\w_{r}\}$ be a set of generators for $\mf{p}$ and let $\a \in \mf{p}^{-1}$ be a nonzero element that is not an algebraic integer which exists by (i). Then $\a\w_{i} \in \mf{p}^{-1}\mf{p}$ for $1 \le i \le r$ and hence $\a\mf{p} \subseteq \mf{p}^{-1}\mf{p}$. By our assumption, this further implies that $\a\mf{p} \subseteq \mf{p}$. But then
        \[
          \a\w_{i} = \sum_{1 \le j \le r}\a_{i,j}\w_{j},
        \]
        with $\a_{i,j} \in \mc{O}_{K}$ for $1 \le i,j \le r$. We can rewrite this as,
        \[
          (\a-\a_{i,i})\w_{i}-\sum_{\substack{1 \le j \le r \\ j \neq i}}\a_{i,j}\w_{j} = 0,
        \]
        for all $i$. These $r$ equations are equivalent to the identity
        \[
          \begin{pmatrix} \a-\a_{1,1} & \a_{1,2} & \cdots & -\a_{1,r} \\ -\a_{2,1} & \a-\a_{2,2} & & \\ \vdots & & \ddots & \\ -\a_{r,1} & & & \a-\a_{r,r} \end{pmatrix}\begin{pmatrix} \w_{1} \\ \w_{2} \\ \vdots \\ \w_{r} \end{pmatrix} = \mathbf{0}.
        \]
        Thus the determinant of the matrix on the left-hand side must be zero. But this means $\a$ is a root of the characteristic polynomial $\det(xI-(\a_{i,j}))$ which is a monic polynomial with coefficients $\mc{O}_{K}$. By \cref{ring_of_integers_algebraically_closed}, $\a$ is an algebraic integer which is a contradiction. Thus $\mf{p}^{-1}\mf{p} = \mc{O}_{K}$.
      \end{enumerate}
    \end{proof}

    Let $J_{K}$ denote the collection of fractional ideals of $K$. We call $J_{K}$ the \textbf{ideal group}\index{ideal group} of $K$. The following theorem shows that $J_{K}$ is indeed a group:

    \begin{theorem}
      Let $K$ be an algebraic number field. Then $J_{K}$ is an abelian group with identity $\mc{O}_{K}$.
    \end{theorem}
    \begin{proof}
      Since fractional ideals are finitely generated $\mc{O}_{K}$-submodules of $K$, the product of fractional ideals is a fractional ideal. It is also clear that $J_{K}$ is abelian if it is a group. Moreover, $\mc{O}_{K}$ is the identity since every every fractional ideal is a finitely generated $\mc{O}_{K}$-submodule of $K$. It now suffices to show that every fractional ideal $\mf{f}$ has an inverse in $J_{K}$. By \cref{lem:inverse_for_prime_ideals} (ii), the prime integral ideal $\mf{p}$ has inverse $\mf{p}^{-1}$. We now show that any integral ideal that is not prime has an inverse. Suppose by contradiction that $\mf{a}$ is such an integral ideal with $N(\mf{a})$ minimal. By \cref{prop:prime_integral_ideals_are_maximal}, there exists a prime integral ideal $\mf{p}$ such that $\mf{a} \subset \mf{p}$. This fact together with \cref{lem:inverse_for_prime_ideals} (i) implies that
      \[
        \mf{a} \subseteq \mf{p}^{-1}\mf{a} \subseteq \mf{p}^{-1}\mf{p} = \mc{O}_{K}.
      \]
      We now claim $\mf{a} \subset \mf{p}^{-1}\mf{a}$. If not, $\mf{a} = \mf{p}^{-1}\mf{a}$. Let $\{\w_{1},\ldots,\w_{r}\}$ be a set of generators for $\mf{a}$. By \cref{lem:inverse_for_prime_ideals}, let $\a \in \mf{p}^{-1}$ be a nonzero element that is not an algebraic integer. Then $\a\w_{i} \in \mf{p}^{-1}\mf{a}$ for $1 \le i \le r$ and hence $\a\mf{a} \subseteq \mf{p}^{-1}\mf{a}$. By our assumption, this further implies that $\a\mf{p} \subseteq \mf{a}$. But then
      \[
        \a\w_{i} = \sum_{1 \le j \le r}\a_{i,j}\w_{j},
      \]
      with $\a_{i,j} \in \mc{O}_{K}$ for $1 \le i,j \le r$. We can rewrite this as,
      \[
        (\a-\a_{i,i})\w_{i}-\sum_{\substack{1 \le j \le r \\ j \neq i}}\a_{i,j}\w_{j} = 0,
      \]
      for all $i$. These $r$ equations are equivalent to the identity
      \[
        \begin{pmatrix} \a-\a_{1,1} & \a_{1,2} & \cdots & -\a_{1,r} \\ -\a_{2,1} & \a-\a_{2,2} & & \\ \vdots & & \ddots & \\ -\a_{r,1} & & & \a-\a_{r,r} \end{pmatrix}\begin{pmatrix} \w_{1} \\ \w_{2} \\ \vdots \\ \w_{r} \end{pmatrix} = \mathbf{0}.
      \]
      Thus the determinant of the matrix on the left-hand side must be zero. But this means $\a$ is a root of the characteristic polynomial $\det(xI-(\a_{i,j}))$ which is a monic polynomial with coefficients $\mc{O}_{K}$. By \cref{ring_of_integers_algebraically_closed}, $\a$ is an algebraic integer which is a contradiction. Thus $\mf{a} \subset \mf{p}^{-1}\mf{a}$. But then $\Norm(\mf{p}^{-1}\mf{a}) < \Norm(\mf{a})$ and by the minimality of $\Norm(\mf{a})$ it follows that the fractional ideal $\mf{p}^{-1}\mf{a}$ is invertible. Let $\mf{b}$ be its inverse. Then $\mf{b}\mf{p}^{-1}\mf{a} = \mc{O}_{K}$ and thus $\mf{a}$ is invertible with inverse $\mf{b}\mf{p}^{-1}$. This is a contradiction, so we conclude that every integral ideal is invertible. We now show that every fractional ideal $\mf{f}$ is invertible. Since $\mf{f}$ is a fractional ideal, there exists a nonzero $\a \in \mc{O}_{K}$ and an integral ideal $\mf{a}$ such that
      \[
        \mf{f} = \frac{1}{\a}\mf{a}.
      \]
      As $\mf{a}$ is invertible, $\a\mf{a}^{-1}$ is the inverse of $\mf{f}$. This completes the proof.
    \end{proof}

    Now that we have proved that the ideal group $J_{K}$ of $K$ is indeed a group, we can shown that every integral ideal factors uniquely into a product of prime integral ideals (up to reordering of the factors):

    \begin{theorem}\label{thm:unique_product_prime_ideals}
      Let $K$ be an algebraic number field. Then for every integral ideal $\mf{a}$ there exist prime integral ideals $\mf{p}_{1},\ldots,\mf{p}_{k}$ such that $\mf{a}$ factors as
      \[
        \mf{a} = \mf{p}_{1} \cdots \mf{p}_{k}.
      \]
      Moreover, this factorization is unique up to reordering of the factors.
    \end{theorem}
    \begin{proof}
      We first prove existence and then uniqueness. For existence, suppose to the contrary that $\mf{a}$ is an integral ideal that does not factor into a product of prime integral ideals and $\mf{a}$ is maximal among all such integral ideals. Necessarily $\mf{a}$ is not prime and by \cref{prop:prime_integral_ideals_are_maximal} there is some prime integral idea $\mf{p}_{1}$ for which $\mf{a} \subset \mf{p}_{1}$. Then by \cref{lem:inverse_for_prime_ideals} (ii), we have $\mf{p}_{1}^{-1}\mf{a} \subset \mc{O}_{K}$ so that $\mf{p}_{1}^{-1}\mf{a}$ is also an integral ideal. Also, \cref{lem:inverse_for_prime_ideals} (i) implies $\mf{a} \subseteq \mf{a}\mf{p}_{1}^{-1}$. Actually, $\mf{a} \subset \mf{a}\mf{p}_{1}^{-1}$ for otherwise $\mf{a} = \mf{a}\mf{p}_{1}^{-1}$ and hence $\mf{p}_{1}^{-1} = {O}_{K}$ which is impossible because $\mf{p}_{1}$ is proper. By maximality, $\mf{a}\mf{p}_{1}^{-1}$ factors into a product of prime integral ideals. That is, there exist prime integral ideals $\mf{p}_{2},\ldots,\mf{p}_{k}$ such that
      \[
        \mf{a}\mf{p}_{1}^{-1} = \mf{p}_{2},\ldots,\mf{p}_{k}.
      \]
      Hence
      \[
        \mf{a} = \mf{p}_{1},\ldots,\mf{p}_{k},
      \]
      so that $\mf{a}$ factors into a product of prime integral ideals which is a contradiction. This proves existence of such a factorization. Now we prove uniqueness. Suppose that $\mf{a}$ admits factorizations
      \[
        \mf{a} = \mf{p}_{1},\ldots,\mf{p}_{k} \quad \text{and} \quad \mf{a} = \mf{q}_{1},\ldots,\mf{q}_{\ell},
      \]
      for prime integral ideals $\mf{p}_{i}$ and $\mf{q}_{j}$ with $1 \le i \le k$ and $1 \le j \le \ell$. Since $\mf{p}_{1}$ is prime, there is some $j$ for which $\mf{q}_{j} \subseteq \mf{p}_{1}$. Without loss of generality, we may assume $\mf{q}_{1} \subseteq \mf{p}_{1}$ and \cref{prop:prime_integral_ideals_are_maximal} we have that $\mf{q}_{1} = \mf{p}_{1}$. Then
      \[
        \mf{p}_{2},\ldots,\mf{p}_{k} = \mf{q}_{2},\ldots,\mf{q}_{\ell}.
      \]
      Repeating this process, we see that $k = \ell$ and $\mf{q}_{i} = \mf{p}_{i}$ for all $i$. This proves uniqueness which completes the proof.
    \end{proof}

    By \cref{thm:unique_product_prime_ideals}, for any integral ideal $\mf{a}$ there exist distinct prime integral ideal $\mf{p}_{1},\ldots,\mf{p}_{r}$ such that $\mf{a}$ admits a factorization
    \[
      \mf{a} = \mf{p}_{1}^{e_{1}} \cdots \mf{p}_{r}^{e_{r}},
    \]
    with $e_{i} \ge 1$ for all $i$, called the \textbf{prime factorization}\index{prime factorization} of $\mf{a}$ with \textbf{prime factors}\index{prime factors} $\mf{p}_{1},\ldots,\mf{p}_{r}$. Just as it is common to suppress the fundamental theorem of arithmetic and just state the prime factorization of an integer, we suppress \cref{thm:unique_product_prime_ideals} and state the prime factorization of an integral ideal. Also, as a near immediate corollary of \cref{thm:unique_product_prime_ideals}, all fractional ideal admits a factorization into a product of prime integral ideals and their inverses (up to reordering of the factors):

    \begin{corollary}\label{cor:fractional_ideal_prime_factorization}
      Let $K$ be an algebraic number field. Then for every fractional ideal $\mf{f}$ there exist prime integral ideals $\mf{p}_{1},\ldots,\mf{p}_{k}$ and $\mf{q}_{1},\ldots,\mf{q}_{\ell}$ such that $\mf{f}$ factors as
      \[
        \mf{f} = \mf{p}_{1} \cdots \mf{p}_{k}\mf{q}_{1}^{-1},\ldots,\mf{q}_{\ell}^{-1}.
      \]
      Moreover, this factorization is unique up to reordering of the factors.
    \end{corollary}
    \begin{proof}
      If $\mf{f}$ is a fractional ideal, then there exists a nonzero $\a \in \mc{O}_{K}$ and an integral ideal $\mf{a}$ such that
      \[
        \mf{f} = \frac{1}{\a}\mf{a}.
      \]
      In particular, $\mf{a}$ and $\a\mc{O}_{K}$ are integral ideals such that $\a\mc{O}_{K}\mf{f} = \mf{a}$. By \cref{thm:unique_product_prime_ideals}, $\mf{a}$ and $\a\mc{O}_{K}$ admit unique factorizations
      \[
        \mf{a} = \mf{p}_{1} \cdots \mf{p}_{k} \quad \text{and} \quad \a\mc{O}_{K} = \mf{q}_{1},\ldots,\mf{q}_{\ell},
      \]
      up to reordering of the factors. Hence
      \[
        \mf{q}_{1},\ldots,\mf{q}_{\ell}\mf{f} = \mf{p}_{1} \cdots \mf{p}_{k},
      \]
      which is equivalent to the factorization for $\mf{f}$.
    \end{proof}

    With the Chinese remainder theorem, we can now derive some useful consequences of the unique factorization of integral ideals. Indeed, suppose $\mf{a}$ is an integral ideal with prime factorization
    \[
      \mf{a} = \mf{p}_{1}^{e_{1}} \cdots \mf{p}_{r}^{e_{r}}.
    \]
    Then the integral ideals $\mf{p}_{1}^{e_{1}},\ldots,\mf{p}_{r}^{e_{r}}$ are pairwise relatively prime so that the Chinese remainder theorem gives an isomorphism
    \[
      \mc{O}_{K}/\mf{a} \cong \bigop_{1 \le i \le r}\mc{O}_{K}/\mf{p}_{i}^{e_{i}}.
    \]
    In particular, for any $\a_{i} \in \mc{O}_{K}$ for all $i$, there exists a unique $\a \in \mc{O}_{K}$ such that
    \[
      \a \equiv \a_{i} \pmod{\mf{p}_{i}^{e_{i}}},
    \]
    for all $i$. We can now show that any fractional ideal is generated by at most two elements:

    \begin{corollary}\label{cor:fractional_ideal_generated_by_two_elements}
      Let $K$ be an algebraic number field. Then any fractional ideal $\mf{f}$ is generated by at most two elements.
    \end{corollary}
    \begin{proof}
      We first prove the claim for an integral ideal $\mf{a}$. Let $\a \in \mf{a}$ be nonzero and let $\mf{p}_{1},\ldots,\mf{p}_{r}$ be the prime factors of $\a\mc{O}_{K}$. As $\a\mc{O}_{K} \subseteq \mf{a}$, the prime factorization of $\mf{a}$ is
      \[
        \mf{a} = \mf{p}_{1}^{e_{1}} \cdots \mf{p}_{r}^{e_{r}},
      \]
      with $e_{i} \ge 0$ for $1 \le i \le r$. By uniqueness of the prime factorization of integral ideals, $\mf{p}_{i}^{e_{i}+1} \subset \mf{p}_{i}^{e_{i}}$ for all $i$. Thus, there exists nonzero $\b_{i} \in \mf{p}_{i}^{e_{i}}-\mf{p}_{i}^{e_{i}+1}$ for all $i$. Since $\mf{p}_{1}^{e_{1}+1},\ldots,\mf{p}_{r}^{e_{r}+1}$ are pairwise relatively prime, the Chinese remainder theorem implies that there exists $\b \in \mc{O}_{K}$ with 
      \[
        b \equiv \b_{i} \tmod{\mf{p}_{i}^{e_{i}+1}},
      \]
      for all $i$. As $\b_{i} \in \mf{p}_{i}^{e_{i}}$ for all $i$, we have $\b \in \mf{a}$ and hence $\b\mc{O}_{K} \subseteq \mf{a}$. But as $\b \notin \mf{p}_{i}^{e_{i}+1}$ for all $i$, we see that $\b\mc{O}_{K}\mf{a}^{-1}$ is necessarily an integral ideal relatively prime to $\a\mc{O}_{K}$. This means
      \[
        \b\mc{O}_{K}\mf{a}^{-1}+\a\mc{O}_{K} = \mc{O}_{K},
      \]
      and hence
      \[
        \b\mc{O}_{K}+\a\mf{a} = \mf{a}.
      \]
      But as $\a,\b \in \mf{a}$, we have $\b\mc{O}_{K}+\a\mf{a} \subseteq \b\mc{O}_{K}+\a\mc{O}_{K} \subseteq \mf{a}$ and so
      \[
        \b\mc{O}_{K}+\a\mc{O}_{K} = \mf{a}.
      \]
      This shows that $\mf{a}$ is generated by at most two elements. Now suppose $\mf{f}$ is a fractional ideal. Then there exists a nonzero $\g \in \mc{O}_{K}$ and an integral ideal $\mf{a}$ such that
      \[
        \mf{f} = \frac{1}{\g}\mf{a}.
      \]
      Since $\mf{a}$ is generated by at most two elements, say $\a$ and $\b$, we have
      \[
        \mf{f} = \frac{\a}{\g}\mc{O}_{K}+\frac{\b}{\g}\mc{O}_{K},
      \]
      and so $\mf{f}$ is also generated by at most two elements as well.
    \end{proof}

    \cref{cor:fractional_ideal_generated_by_two_elements} shows that while the the ring of integers $\mc{O}_{K}$ of $K$ may not be a principle ideal domain, it is not far off from one since we every integral ideal needs at most two generators. We will give a more refined interpretation of this when discussing quotients of the ideal group $I_{K}$. For now, we deduce some more properties of the norm of integral ideals and extend this notion to fractional ideals as well. We will need a useful proposition:

    \begin{proposition}\label{prop:isomorphism_of_quotient_by_prime_integral_ideals}
      Let $K$ be an algebraic number field. Then for any prime integral ideal $\mf{p}$ and $n \ge 0$,
      \[
        \mc{O}_{K}/\mf{p} \cong \mf{p}^{n}/\mf{p}^{n+1},
      \]
      as $\mc{O}_{K}$-modules.
    \end{proposition}
    \begin{proof}
      By the uniqueness of the factorization of integral ideals, there exists $\b \in \mf{p}^{n}-\mf{p}^{n+1}$. Now consider the homomorphism
      \[
        \phi:\mc{O}_{K} \to \mf{p}^{n}/\mf{p}^{n+1} \qquad \a \to \a\b \pmod{\mf{p}^{n+1}}.
      \]
      By the isomorphism theorems, it suffices to show $\ker\phi = \mf{p}$ and that $\phi$ is surjective. Let us first show $\ker\phi = \mf{p}$. As $\b \in \mf{p}^{n}$, it is obvious that $\mf{p} \subseteq \ker\phi$. Conversely, suppose $\a \in \mc{O}_{K}$ is such that $\phi(\a) = 0$. Then $\a\b \in \mf{p}^{n+1}$, and as $\b \in \mf{p}^{n}-\mf{p}^{n+1}$ we must have $\a \in \mf{p}$. It follows that $\ker\phi = \mf{p}$. We now show that $\phi$ is surjective. Let $\g \in \mf{p}^{n}$ be a representative of a class in $\mf{p}^{n}/\mf{p}^{n+1}$. As $\b \in \mf{p}^{n}$, we have $\b\mc{O}_{K} \subseteq \mf{p}^{n}$. But since $\b \notin \mf{p}^{n+1}$, we see that $\b\mc{O}_{K}\mf{p}^{-n}$ is necessarily an integral ideal relatively prime to $\mf{p}^{n+1}$. As $\mf{p}^{n+1}$ and $\b\mc{O}_{K}\mf{p}^{-n}$ are relatively prime, the Chinese remainder theorem implies that we can find a unique $\a \in \mc{O}_{K}$ such that
      \[
        \a \equiv \g \pmod{\mf{p}^{n+1}} \quad \text{and} \quad \a \equiv 0 \tmod{\b\mc{O}_{K}\mf{p}^{-n}}.
      \]
      The second condition implies $\a \in \b\mc{O}_{K}\mf{p}^{-n}$. As $\g \in \mf{p}^{n}$ and $\a$ and $\g$ differ by an element in $\mf{p}^{n+1} \subset \mf{p}^{n}$, we have that $\a \in \b\mc{O}_{K}\mf{p}^{-n} \cap \mf{p}^{n} = \b\mc{O}_{K}$ where the equality holds because the intersection of ideals is equal to their product if the ideals are relatively prime. Thus $\frac{\a}{\b} \in \mc{O}_{K}$ and hence
      \[
        \phi\left(\frac{\a}{\b}\right) = \a \equiv \g \tmod{\mf{p}^{n+1}}.
      \]
      This shows $\phi$ is surjective completing the proof.
    \end{proof}

    Now we can show that the norm of an integral ideal is multiplicative:

    \begin{proposition}\label{prop:ideal_norm_is_multiplicative}
      Let $K$ be an algebraic number field and let $\mf{a}$ and $\mf{b}$ be integral ideals. Then
      \[
        \Norm(\mf{a}\mf{b}) = \Norm(\mf{a})\Norm(\mf{b}).
      \]
    \end{proposition}
    \begin{proof}
      First suppose $\mf{a}$ and $\mf{b}$ are relatively prime. Then the Chinese remainder theorem implies
      \[
        \mc{O}_{K}/\mf{a}\mf{b} \cong \mc{O}_{K}/\mf{a} \op \mc{O}_{K}/\mf{b},
      \]
      and hence $|\mc{O}_{K}/\mf{a}\mf{b}| = |\mc{O}_{K}/\mf{a}||\mc{O}_{K}/\mf{b}|$ so that $\Norm(\mf{a}\mf{b}) = \Norm(\mf{a})\Norm(\mf{b})$. It now suffices to show $\Norm(\mf{p}^{n}) = \Norm(\mf{p})^{n}$ for all prime integral ideals $\mf{p}$ and $n \ge 0$. We will prove this by induction. The base case is clear so assume that the claim holds for $n-1$. By the isomorphism theorems, we have
      \[
        \mc{O}_{K}/\mf{p}^{n-1} \cong (\mc{O}_{K}/\mf{p}^{n})/(\mf{p}^{n-1}/\mf{p}^{n}).
      \]
      Using \cref{prop:isomorphism_of_quotient_by_prime_integral_ideals}, it follows that
      \[
        |\mc{O}_{K}/\mf{p}^{n-1}| = \frac{|\mc{O}_{K}/\mf{p}^{n}|}{|\mf{p}^{n-1}/\mf{p}^{n}|} = \frac{|\mc{O}_{K}/\mf{p}^{n}|}{|\mc{O}_{K}/\mf{p}|}.
      \]
      Thus $\Norm(\mf{p}^{n}) = \Norm(\mf{p}^{n-1})\Norm(\mf{p})$ and our induction hypothesis implies $\Norm(\mf{p}^{n}) = \Norm(\mf{p})^{n}$. This completes the proof.
    \end{proof}

    Note that by \cref{prop:ideal_norm_is_multiplicative}, the norm is a homomorphism from the set of integral ideals into $\Z_{\ge 1}$. As last we can extend the norm to fractional ideals. Let $\mf{f}$ be a fractional ideal. By \cref{cor:fractional_ideal_prime_factorization}, there exist unique integral ideals $\mf{a}$ and $\mf{b}$ such that
    \[
      \mf{f} = \frac{\mf{a}}{\mf{b}}.
    \]
    For any fractional ideal $\mf{f}$, we define its \textbf{norm}\index{norm} $\Norm(\mf{f})$ by
    \[
      \Norm(\mf{f}) = \frac{\Norm(\mf{a})}{\Norm(\mf{b})}.
    \]
    Then we have a homomorphism
    \[
      \Norm:I_{K} \to \Q^{\ast} \qquad \mf{f} \mapsto \Norm(\mf{f}).
    \]
  \section{\todo{Ramification}}
    Let $K$ be an algebraic number field of degree $n$. Then as we have already noted, there are exactly $n$ distinct $\Q$-embeddings into its algebraic closure $\conj{K}$. Let $r_{1}$ and $2r_{2}$ denote the number of real and complex embeddings respectively (the complex embeddings come in pairs because if $\s$ is a complex embedding then so is its conjugate $\conj{\s}$). We call the pair $(r_{1},r_{2})$ the \textbf{signature}\index{signature} of $K$. Let $\s_{1},\ldots,\s_{n}$ denote these distinct embeddings and let $\{\a_{1},\ldots,\a_{n}\}$ be an integral basis for $K$. Consider the matrix 
    \[
      M(\a_{1},\ldots,\a_{n}) = (\s_{i}(\a_{j}))_{i,j}. 
    \]
    As the image of the $\Q$-embeddings of $K$ live in $\conj{K}$, the determinant of $M(\a_{1},\ldots,\a_{n})$ need not be an integer or even an element of $K$. To correct for this, we instead consider the square of the determinant of $M(\a_{1},\ldots,\a_{n})$. Recalling that the $(i,j)$-entry of $M(\a_{1},\ldots,\a_{n})^{t}M(\a_{1},\ldots,\a_{n})$ is the dot product of the $i$-th and $j$-th columns $M(\a_{1},\ldots,\a_{n})$, we have
    \begin{align*}
      \det(M(\a_{1},\ldots,\a_{n}))^{2} &= \det(M(\a_{1},\ldots,\a_{n})^{t}M(\a_{1},\ldots,\a_{n})) \\
      &= \det\left(\left(\sum_{1 \le k \le n}\s_{k}(\a_{i})\s_{k}(\a_{j})\right)_{i,j}\right) \\
      &= \det\left(\left(\sum_{1 \le k \le n}\s_{k}(\a_{i}\a_{j})\right)_{i,j}\right) \\
      &= \det((\Trace(\a_{i}\a_{j}))_{i,j}),
    \end{align*}
    where the last equality follows by \cref{prop:formulas_for_trace_and_norm}. This last expression is necessarily an integer by \cref{cor:norm_and_trace_of_algebraic_integers}. It is also independent of the choice of integer basis. Indeed, if $\{\a_{1}',\ldots,\a_{n}'\}$ is another integral basis then we have
    \[
      \a_{i}' = \sum_{1 \le j \le n}a_{i,j}\a_{j},
    \]
    with $a_{i,j} \in \Z$ for $1 \le i,j \le n$. Set $A = (a_{i,j})_{i,j}$. Then
    \[
      M(\a_{1}',\ldots,\a_{n}') = AM(\a_{1},\ldots,\a_{n}).
    \]
    Moreover, $A$ as well as its inverse has integer entries because an integral basis generates $\mc{O}_{K}$ as a $\Z$-module. But this means $\det(A)$ and $\det(A)^{-1}$ are both integers and hence $\det(A) = \pm 1$. Then
    \[
      \det(M(\a_{1}',\ldots,\a_{n}'))^{2} = \det(AM(\a_{1},\ldots,\a_{n}))^{2} = \det(M(\a_{1},\ldots,\a_{n}))^{2},
    \]
    as desired. Accordingly, for an integral basis $\{\a_{1},\ldots,\a_{n}\}$ we define the \textbf{discriminant}\index{discriminant} $\D_{K}$ of $K$ by
    \[
      \D_{K} = \det((\Trace(\a_{i}\a_{j}))_{i,j}).
    \]
    Then $\D_{K}$ is an integer and is independent of the particular integral basis. The discriminant $\D_{K}$ is also never zero. To see this, we require a lemma:

    \begin{lemma}\label{lem:trace_is_nondegenerate}
      Let $K$ be an algebraic number field. Then the map
      \[
        K \x K \to \Q \qquad (\k,\l) \to \Trace(\k\l),
      \]
      is a nondegenerate symmetric bilinear form.
    \end{lemma}
    \begin{proof}
      From the definition of the trace, it is clear that the map is a symmetric bilinear form. To see that is is nondegenerate, suppose $n$ is the degree of $K$. Then
      \[
        \Trace(\k\k^{-1}) = \Trace(1) = n.
      \]
      Hence the symmetric bilinear form is nondegenerate.
    \end{proof}

    We can now show that the discriminant of an algebraic number field is never zero:

    \begin{proposition}
      Let $K$ be an algebraic number field. Then $\D_{K} \neq 0$.
    \end{proposition}
    \begin{proof}
      Now let $\{\a_{1},\ldots,\a_{n}\}$ be an integral basis for $K$. Suppose to the contrary that $\D_{K} = 0$. Then the matrix $(\Trace(\a_{i}\a_{j}))_{i,j}$ is not invertible. Hence there exists a nonzero column vector $(q_{1},\ldots,q_{n})^{t}$ with $q_{i} \in \Q$ for $1 \le i \le n$ such that
      \[
        (\Trace(\a_{i}\a_{j}))_{i,j}(q_{1},\ldots,q_{n})^{t} = \mathbf{0}.
      \]
      This is equivalent to the $n$ equations
      \[
        \sum_{1 \le j \le n}q_{j}\Trace(\a_{i}\a_{j}) = 0,
      \]
      for all $i$. Setting
      \[
        \l = \sum_{1 \le j \le n}q_{j}\a_{j},
      \]
      linearity of the trace implies that these $r$ equations are equivalent to the fact that $\Trace(\a_{i}\l) = 0$ for all $i$. As $\{\a_{1},\ldots,\a_{n}\}$ is a basis for $K$, it follows that $\l \in K$ is a nonzero element for which $\Trace(\k\l) = 0$ for all $\k \in K$. But this is impossible by \cref{lem:trace_is_nondegenerate}. Hence $\D_{K} \neq 0$.
    \end{proof}

    Now let $\mf{p}$ be a prime integral ideal. Then $\mf{p} \cap \Z$ is a prime ideal of $\Z$. Indeed, it is clear that $\mf{p} \cap \Z$ is an ideal of $\Z$. It is proper because $1 \notin \mf{p} \cap \Z$ as $\mf{p}$ does not contain units. It is nonzero because $\mc{O}_{K}/\mf{p}$ is a finite field by \cref{prop:prime_integral_ideals_are_maximal} and thus has characteristic dividing $\Norm(\mf{p})$ by definition of the norm so that $\Norm(\mf{p}) \in \mf{p}$. But as $\Norm(\mf{p})$ is also a positive integer, $\Norm(\mf{p}) \in \mf{p} \cap \Z$. To show that $\mf{p} \cap \Z$ is prime, suppose $a$ and $b$ are integers such that $ab \in \mf{p} \cap \Z$. Then $ab \in \mf{p}$ and since $\mf{p}$ is prime either $a \in \mf{p}$ or $b \in \mf{p}$. But as $a$ and $b$ are both integers, either $a \in \mf{p} \cap \Z$ or $b \in \mf{p} \cap \Z$ as desired. We have now shown that $\mf{p} \cap \Z$ is a prime ideal of $\Z$. As all prime ideals of $\Z$ are of the form $p\Z$ for some prime $p$, we have that
    \[
      \mf{p} \cap \Z = p\Z,
    \]
    for a unique prime $p$. Accordingly, we say that $\mf{p}$ is \textbf{above}\index{above} $p\Z$, or equivalently, $p\Z$ is \textbf{below}\index{below} $\mf{p}$. Moreover, if $\mf{p}$ is above $p\Z$, then $\mf{p}$ must be a prime factor of $p\mc{O}_{K}$. Indeed, $p\Z \subseteq \mf{p}$ so that $p\mc{O}_{K} \subseteq \mf{p}$ and then the fact $\mf{p}$ is prime implies that some prime factor of $p\mc{O}_{K}$ is contained in $\mf{p}$. Since prime integral ideals are maximal by \cref{prop:prime_integral_ideals_are_maximal}, this prime factor must be $\mf{p}$ itself. We illustrate this relation by the extension
    \begin{center}
      \begin{tikzcd}
        \mf{p} \subset \mc{O}_{K} \subset K \arrow[dash]{d} \\
        p\Z \subset \Z \subset \Q
      \end{tikzcd}
    \end{center}
    Since $\mf{p}$ and $p\Z$ are maximal in $\mc{O}_{K}$ and $\Z$ respectively (by \cref{prop:prime_integral_ideals_are_maximal}), we have the residue fields $\mc{O}_{K}/\mf{p}$ and $\Z/p\Z$. In particular, $\Z/p\Z \cong \F_{p}$ is the finite field with $p$ elements. It turns out that $\mc{O}_{K}/\mf{p}$ is a finite dimensional vector space over $\F_{p}$. To see this, consider the homomorphism
    \[
      \phi:\Z \to \mc{O}_{K}/\mf{p} \qquad a \to a \tmod{\mf{p}}.
    \]
    Note that $\ker\phi = \mf{p} \cap \Z$ and hence $\ker\phi = p\Z$ since $\mf{p}$ is above $p\Z$. By the isomorphism theorems, $\phi$ induces an injection $\phi:\Z/p\Z \to \mc{O}_{K}/\mf{p}$. By \cref{prop:residue_of_integral_ideal_is_finite}, $\mc{O}_{K}/\mf{p}$ is finite and thus a finite field containing $\Z/p\Z$. Necessarily $\mc{O}_{K}/\mf{p}$ is a finite dimensional vector space over $\F_{p}$. Accordingly, for a prime integral ideal $\mf{p}$ we define the \textbf{inertia degree}\index{inertia degree} $f_{\mf{p}}$ of $\mf{p}$ by
    \[
      f_{\mf{p}} = [\mc{O}_{K}/\mf{p}:\F_{p}].
    \]
    That is, $f_{\mf{p}}$ is the dimension of the residue field $\mc{O}_{K}/\mf{p}$ as a vector space over $\F_{p}$. Then we have
    \[
      \Norm(\mf{p}) = |\mc{O}_{K}/\mf{p}| = |\F_{p}^{f_{\mf{p}}}| = p^{f_{\mf{p}}}.
    \]
    Now suppose $\mf{p}$ is above $p\Z$ for the prime $p$. Then, as we have noted, $\mf{p}$ is a prime factor of $p\mc{O}_{K}$. The \textbf{ramification index}\index{ramification index} $e_{\mf{p}}$ of $\mf{p}$ is the positive integer such that $p\mc{O}_{K}\mf{p}^{-e_{\mf{p}}}$ is relatively prime to $\mf{p}$. If $p\mc{O}_{K}$ has prime factors $\mf{p}_{1},\ldots,\mf{p}_{r}$, then the prime factorization of $p\mc{O}_{K}$ is
    \[
      p\mc{O}_{K} = \mf{p}_{1}^{e_{\mf{p}_{1}}} \cdots \mf{p}_{r}^{e_{\mf{p}_{r}}}.
    \]
    We say that $p$ is \textbf{ramified}\index{ramified} if $e_{\mf{p}_{i}} \ge 2$ for some $i$ and \textbf{unramified}\index{unramified} otherwise. In particular,
    \[
      p\mc{O}_{K} = \mf{p}_{1} \cdots \mf{p}_{r},
    \]
    if and only if $p$ is unramified.
  \section{\todo{The Ideal Class Group}}
  \section{\todo{Dirichlet's Unit Theorem}}